<!--@CustomCode-->
<div class="container mt-4">
  <h3 class="mb-4">{{ 'DASHBOARD.CARDS.TDTASK_TITLE' | translate }}</h3>

  <div class="d-flex mb-3">
    <button *ngIf="canAdd" class="btn btn-primary me-2" (click)="addCommand()">
      <i class="bi bi-plus"></i>
    </button>
    <input *ngIf="canSearch" type="text" class="form-control me-2" [(ngModel)]="searchTerm" [placeholder]="'COMMON.SEARCH_PLACEHOLDER' | translate" />
    <button *ngIf="canRefresh" class="btn btn-success me-2" (click)="reloadData()">
      <i class="bi bi-arrow-clockwise"></i>
    </button>
  </div>

  <table class="table table-striped table-bordered table-hover">
    <thead class="table-dark">
      <tr>
        <th>{{ 'TDTASK.TITLE' | translate }}</th>
        <th>{{ 'TDTASK.DESCRIPTION' | translate }}</th>
        <th>{{ 'TDTASK.DUE' | translate }}</th>
        <th>{{ 'TDTASK.PRIORITY' | translate }}</th>
        <th *ngIf="canEdit || canDelete" style="white-space: nowrap; width: 1%;">{{ 'COMMON.ACTIONS' | translate }}</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of dataItems">
        <td><strong>{{ item.title }}</strong></td>
        <td>{{ item.description }}</td>
        <td>{{ item.dueDate | date:'short' }}</td>
        <td>{{ item.priority }}</td>
        <td *ngIf="canEdit || canDelete">
          <div class="d-flex gap-1">
            <button *ngIf="canEdit" class="btn btn-sm btn-outline-secondary me-2" (click)="editCommand(item)">
              <i class="bi bi-pencil"></i>
            </button>
            <button *ngIf="canDelete" class="btn btn-sm btn-outline-danger" (click)="deleteCommand(item)">
              <i class="bi bi-trash"></i>
            </button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
